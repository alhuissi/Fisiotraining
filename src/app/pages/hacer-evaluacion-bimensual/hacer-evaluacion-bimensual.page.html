<ion-header>
    <ion-toolbar color="dark">
        <ion-buttons slot="start">
            <ion-back-button defaultHref="tabs/perfil"></ion-back-button>
        </ion-buttons>
        <ion-button color="danger" fill="outline" slot="end" class="boton" (click)="start()">
            <ion-icon style="color:#fff; font-size: 25px" name="time"></ion-icon>
        </ion-button>
        <ion-title class="ion-text-center" (click)="reset()">{{time}}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <ion-grid>

        <ion-row>
            <ion-col class="ion-text-center">
                <ion-item>
                    <ion-label class="ion-text-center ion-text-wrapper" color="primary" style="font-size: 22px;"><b>EVALUACIÓN
                            FISIOTRAINING</b></ion-label>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col class="ion-text-center">
                <ion-label class="ion-text-center" style="font-size: 15px;"><b>{{userName}} {{userLastName}}</b>
                </ion-label>
            </ion-col>
            <ion-col class="ion-text-center">
                <ion-label class="ion-text-center" style="font-size: 15px;"><b>{{fechaToday2 | date:'dd/MM/yyyy'}}</b>
                </ion-label>
            </ion-col>
        </ion-row>
        <br>

        <!-- Evaluación -->

        <ion-card class="animated fadeIn slow card">
            <ion-card-header color="light" tappable (click)="collapseCard2 = !collapseCard2">
                <ion-card-title color="dark" class="ion-text-center ion-text-wrap"><b>EVALUACIÓN</b> &nbsp;
                    <ion-icon *ngIf="collapseCard" size="medium" name="arrow-dropright"></ion-icon>
                    <ion-icon *ngIf="!collapseCard" size="medium" name="arrow-dropdown"></ion-icon>
                </ion-card-title>
            </ion-card-header>
            <ion-card-content [@visibilityChanged] *ngIf="collapseCard2">

                <div class="linea">
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Función Cardiaca</b></h2>
                        </ion-label>
                    </ion-row>
                    <br>
                    <!-- <ion-input tappable type="text" placeholder="this.evaluacionPrueba.funcionCardiaca" [(ngModel)]="this.evaluacionPrueba.funcionCardiaca" inputmode="text"></ion-input> -->
                    <ion-row>
                        <ion-label class="ion-text-wrap">FC Reposo: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.fcReposo"
                            inputmode="number"></ion-input>
                    </ion-row>
                    <ion-row>
                        <ion-label class="ion-text-wrap">FC Máxima: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.fcMaxima"
                            inputmode="number"></ion-input>
                    </ion-row>
                    <ion-row>
                        <ion-label class="ion-text-wrap">Presión Arterial: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.presionArterial"
                            inputmode="number"></ion-input>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Puntaje Final (%): &nbsp;</b></h2>
                        </ion-label>
                    </ion-row>
                    <ion-row>
                        <ion-range [(ngModel)]="rateFuncionCardiaca" pin="true" snaps="true" ticks="false" min="0"
                            max="100" color="secondary" value='100' disabled="false"
                            (ngModelChange)="onModelChangeFuncionCardiaca($event)"></ion-range>
                    </ion-row>
                </div>

                <div class="linea">
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Indice Cardiovascular</b></h2>
                        </ion-label>
                    </ion-row>
                    <br>
                    <!-- <ion-input tappable type="text" placeholder="this.evaluacionPrueba.funcionCardiaca" [(ngModel)]="this.evaluacionPrueba.funcionCardiaca" inputmode="text"></ion-input> -->
                    <ion-row>
                        <ion-label class="ion-text-wrap">Colesterol: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.colesterol"
                            inputmode="number"></ion-input>
                    </ion-row>
                    <ion-row>
                        <ion-label class="ion-text-wrap">LDL: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.ldl" inputmode="number">
                        </ion-input>
                    </ion-row>
                    <ion-row>
                        <ion-label class="ion-text-wrap">TGL: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.tgl" inputmode="number">
                        </ion-input>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Puntaje Final (%): &nbsp;</b></h2>
                        </ion-label>
                    </ion-row>
                    <ion-row>
                        <ion-range [(ngModel)]="rateIndiceCardiovascular" pin="true" snaps="true" ticks="false" min="0"
                            max="100" color="secondary" value='100' disabled="false"
                            (ngModelChange)="onModelChangeIndiceCardiovascular($event)"></ion-range>
                    </ion-row>
                </div>

                <div class="linea">
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>FMS</b></h2>
                        </ion-label>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-col>
                            <ion-button expand="block" shape="round" color="danger" (click)="openFMS()">
                                <ion-label class="text-center">
                                    <h3><b>REALIZAR FMS</b></h3>
                                </ion-label>
                            </ion-button>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">Resultado: &nbsp;{{this.rateFms}}</ion-label>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Puntaje Final (%): &nbsp;</b></h2>
                        </ion-label>
                    </ion-row>
                    <ion-row>
                        <ion-range [(ngModel)]="rateFmsPorcentaje" pin="true" snaps="true" ticks="false" min="0"
                            max="100" color="secondary" value='100' disabled="false"
                            (ngModelChange)="onModelChangeFms($event)"></ion-range>
                    </ion-row>
                </div>

                <div class="linea">
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Consumo de Oxígeno</b></h2>
                        </ion-label>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-label class="ion-text-wrap">Test Naveta: &nbsp;</ion-label>
                        <ion-input tappable type="number" [(ngModel)]="this.evaluacionPrueba.oxigeno"
                            inputmode="number"></ion-input>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Puntaje Final (%): &nbsp;</b></h2>
                        </ion-label>
                    </ion-row>
                    <ion-row>
                        <ion-range [(ngModel)]="rateOxigeno" pin="true" snaps="true" ticks="false" min="0" max="100"
                            color="secondary" value='100' disabled="false"
                            (ngModelChange)="onModelChangeOxigeno($event)"></ion-range>
                    </ion-row>
                </div>

                <div>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Fuerza</b></h2>
                        </ion-label>
                    </ion-row>
                    <br>
                    <ion-row>
                        <ion-label class="text-center ion-text-wrap">
                            <h2><b>Puntaje Final (%): &nbsp;</b></h2>
                        </ion-label>
                    </ion-row>
                    <ion-row>
                        <ion-range [(ngModel)]="rateFuerza" pin="true" snaps="true" ticks="false" min="0" max="100"
                            color="secondary" value='100' disabled="false"
                            (ngModelChange)="onModelChangeFuerza($event)"></ion-range>
                    </ion-row>
                </div>

            </ion-card-content>
        </ion-card>

        <!-- Ficha Clínica -->

        <ion-card class="animated fadeIn slow card">
            <ion-card-header color="light" tappable (click)="collapseCard = !collapseCard">
                <ion-card-title color="dark" class="ion-text-center ion-text-wrap"><b>FICHA CLÍNICA</b> &nbsp;
                    <ion-icon *ngIf="collapseCard" size="medium" name="arrow-dropright"></ion-icon>
                    <ion-icon *ngIf="!collapseCard" size="medium" name="arrow-dropdown"></ion-icon>
                </ion-card-title>

            </ion-card-header>
            <ion-card-content [@visibilityChanged] *ngIf="collapseCard">

                <ion-item>
                    <ion-label position="stacked">Edad: </ion-label>
                    <ion-input tappable type="number" [(ngModel)]="this.fichaClinica.edad" inputmode="number">
                    </ion-input>
                </ion-item>


                <ion-item>
                    <ion-label position="stacked">Ocupación: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.ocupacion" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Ayudas técnicas: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.ayudasTecnicas" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Actividad deportiva: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.actividadDeportiva" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Intervenciones qx: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.intervencionesQX" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Traumas M-E: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.traumas" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Actividad en el trabajo: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.ocupacionActualTrabajo"
                        inputmode="text"></ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Antecedentes: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.antecedentes" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Hábitos: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.habitos" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Medicamentos: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.medicamentos" inputmode="text">
                    </ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="stacked">Objetivos: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.fichaClinica.objetivos" inputmode="text">
                    </ion-input>
                </ion-item>
            </ion-card-content>
        </ion-card>

        <!-- Examen -->

        <ion-card class="animated fadeIn slow card">
            <ion-card-header color="light" tappable (click)="collapseCard3 = !collapseCard3">
                <ion-card-title color="dark" class="ion-text-center ion-text-wrap"><b>EXAMEN KINÉSICO</b> &nbsp;
                    <ion-icon *ngIf="collapseCard" size="medium" name="arrow-dropright"></ion-icon>
                    <ion-icon *ngIf="!collapseCard" size="medium" name="arrow-dropdown"></ion-icon>
                </ion-card-title>
                <!--  <ion-icon *ngIf="!collapseCard" name="arrow-down"></ion-icon> -->
            </ion-card-header>
            <ion-card-content [@visibilityChanged] *ngIf="collapseCard3">
                <ion-item>
                    <ion-label position="stacked">Evaluación del Dolor: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.evaluacionPrueba.dolor" inputmode="text">
                    </ion-input>
                    <ion-label position="stacked">Motivo de Consulta: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.evaluacionPrueba.motivo" inputmode="text">
                    </ion-input>
                    <ion-label position="stacked">Diagnóstico Médico: </ion-label>
                    <ion-input tappable type="text" [(ngModel)]="this.evaluacionPrueba.diagnostico" inputmode="text">
                    </ion-input>
                </ion-item>
            </ion-card-content>
        </ion-card>

        <!-- Observaciones -->

        <ion-card class="animated fadeIn slow card">
            <ion-card-header color="light" tappable (click)="collapseCard4 = !collapseCard4">
                <ion-card-title color="dark" class="ion-text-center ion-text-wrap"><b>OBSERVACIONES</b> &nbsp;
                    <ion-icon *ngIf="collapseCard" size="medium" name="arrow-dropright"></ion-icon>
                    <ion-icon *ngIf="!collapseCard" size="medium" name="arrow-dropdown"></ion-icon>
                </ion-card-title>
                <!--  <ion-icon *ngIf="!collapseCard" name="arrow-down"></ion-icon> -->
            </ion-card-header>
            <ion-card-content [@visibilityChanged] *ngIf="collapseCard4">

                <ion-item class="ion-text-wrap">
                    <ion-textarea tappable type="text" [(ngModel)]="this.evaluacionPrueba.observacion" inputmode="text">
                    </ion-textarea>

                </ion-item>
            </ion-card-content>
        </ion-card>

    </ion-grid>

    <ion-row>
        <ion-col text-center>
            <ion-button color="primary" expand="block" shape="round" fill="outline" (click)="guardarEvaluacion()">
                GUARDAR
            </ion-button>
        </ion-col>
    </ion-row>

    <ion-row>
        <ion-col text-center>
            <ion-button color="primary" expand="block" shape="round" fill="outline" (click)="goBack()">
                VOLVER
            </ion-button>
        </ion-col>
    </ion-row>

</ion-content>